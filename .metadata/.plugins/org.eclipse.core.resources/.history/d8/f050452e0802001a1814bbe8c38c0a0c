package com.bridgeLabz.controller;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.bridgeLabz.dao.SendDataToDB;
import com.bridgeLabz.model.Registration;

@WebServlet("/register")
public class RegistrationServlet extends HttpServlet{
	private static final long serialVersionUID = 1L;

	public void service(HttpServletRequest request,HttpServletResponse response) throws IOException 
	{
		Registration register = new Registration();
		register.setName(request.getParameter("name"));
		register.setPhoneNo(request.getParameter("phoneNo"));
		register.setEmail(request.getParameter("email"));
		register.setPassword(request.getParameter("password"));
		register.setCheckPassword(request.getParameter("checkPassword"));
		PrintWriter out = response.getWriter();

		try {
			if(SendDataToDB.inseretIntoDB(register)!=true)
				response.sendRedirect("register.jsp");
			else
			{
				 response.setContentType("text/html");
				 out.println("<script type=\"text/javascript\">");
				 out.println("alert('Email id is not matching');");
				 out.println("location='forgotPassword.jsp';");
				 out.println("</script>");
			}
				response.sendRedirect("login.jsp");
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
	}
	
}
